import{a as o,h as _,ah as e,aw as E,ai as k}from"./index-WozvSfaz.js";import{P as D,S as M,s as R,b as w,T as z,d as V,c,e as q,f as $,D as U,g as Y,h as W,R as X,U as G,j as J,k as K,l as F}from"./ErpApp-AJk95zmD.js";import{A as Q,ax as h,as as Z,B as u,U as A,aM as P,aE as ee,aH as O,aI as m}from"./IdurarOs-2Q7XqIs7.js";var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 240H144c-17.7 0-32 14.3-32 32v608c0 17.7 14.3 32 32 32h608c17.7 0 32-14.3 32-32V272c0-17.7-14.3-32-32-32zm-40 600H184V312h528v528zm168-728H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h576v576c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM300 550h296v64H300z"}}]},name:"switcher",theme:"outlined"};const se=te;var ae=function(a,n){return o.createElement(Q,_({},a,{ref:n,icon:se}))};const ne=o.forwardRef(ae),{Search:le}=Z;function ie({config:t}){const{crudContextAction:a}=w(),{collapsedBox:n,panel:s}=a,i=()=>{s.open(),n.close()};return e.jsx(u,{onClick:i,type:"primary",className:"text-[white] bg-teal-300 min-h-10 px-8 cursor-pointer mt-7 right",children:"Create Client"})}function ce({config:t,setAlignValue:a,filterTable:n}){h();const s=i=>{a(i)};return e.jsx(e.Fragment,{children:e.jsx(D,{title:"",extra:[e.jsx("div",{className:"grid justify-between",style:{gridTemplateColumns:"auto auto"},children:e.jsxs("div",{className:"grid gap-x-5 justify-start ",style:{gridTemplateColumns:"auto auto minmax(auto, 860px)"},children:[e.jsxs("div",{className:"grid gap-y-1.5",children:[e.jsx("p",{children:"Type"}),e.jsx(M,{defaultValue:"active",onChange:s,options:[{label:e.jsx("div",{style:{padding:4},children:e.jsx("div",{children:"Active"})}),value:"active"},{label:e.jsx("div",{style:{padding:4},children:e.jsx("div",{children:"Archived"})}),value:"archived"}]})]}),e.jsxs("div",{className:"grid gap-y-1.5",children:[e.jsx("p",{children:"Search Client"}),e.jsx(le,{placeholder:"Search by task name ...",className:"task-search",onSearch:n,enterButton:!0})]})]})},1),e.jsx(ie,{config:t},`${R.generate()}`)],style:{padding:"20px 0px"}})})}function re({data:t,editItem:a,removeItem:n}){return e.jsxs("div",{className:"relative mt-4",children:[e.jsxs("div",{className:"grid rounded-lg items-center p-3 border-2 gap-4",style:{gridTemplateColumns:"40px auto"},children:[e.jsx("div",{className:"text-[16px] flex items-center justify-center w-[40px] h-[40px] rounded-full text-white",style:{background:"rgb(115, 192, 255)"},children:t.name&&t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"grid gap-1 mb-2",children:e.jsx("p",{children:t.name})}),e.jsx(z,{className:"rounded-full py-0.5 px-3",color:"warning",children:"Not Invoiced yet"})]})]}),e.jsxs("div",{className:"absolute grid gap-2",style:{top:"-12px",right:"15px",gridTemplateColumns:"1fr 1fr 1fr"},children:[e.jsx("div",{className:"client-card-control",onClick:a,children:e.jsx(A,{placement:"top",title:"Edit",children:e.jsx(P,{})})}),e.jsx("div",{className:"client-card-control",onClick:a,children:e.jsx(A,{placement:"top",title:"Archive",children:e.jsx(ne,{})})}),e.jsx("div",{className:"client-card-control",onClick:n,children:e.jsx(A,{placement:"top",title:"Remove",children:"X"})})]})]})}function oe({config:t}){let{entity:a,searchConfig:n}=t;h();const s=E(),{crudContextAction:i}=w(),{panel:p,collapsedBox:d,modal:j,readBox:S,editBox:g,advancedBox:L}=i,{result:r,isLoading:v}=k(V),{pagination:B,items:y}=r;ee.useForm();const[x,f]=o.useState("active"),C=l=>{s(c.currentItem({data:l})),s(c.currentAction({actionType:"delete",data:l})),j.open()},b=l=>{console.log(l),s(c.currentItem({data:l})),s(c.currentAction({actionType:"update",data:l})),g.open(),p.open(),d.open()},N=l=>{const T={q:l,fields:(n==null?void 0:n.searchFields)||""};s(c.list({entity:a,options:T}))},H=()=>{const l={page:1,items:100};s(c.list({entity:a,options:l}))};return o.useEffect(()=>{H()},[]),e.jsxs("div",{children:[e.jsx(ce,{config:t,setAlignValue:f,filterTable:N}),e.jsxs("div",{className:"grid",children:[x==="active"&&e.jsxs("div",{className:"",children:[e.jsx("p",{children:"All Clients"}),e.jsx("div",{className:"grid gap-3 mt-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))"},children:y.map((l,T)=>e.jsx(re,{data:l,editItem:()=>b(l),removeItem:()=>C(l)},T))})]}),x==="archived"&&e.jsxs("div",{className:"",children:[e.jsx("p",{children:"Archived Clients"}),e.jsx("div",{className:"grid gap-3 mt-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))"}})]})]})]})}function de({config:t,formElements:a,withUpload:n}){const s=h(),{crudContextAction:i,state:p}=w(),{deleteModalLabels:d}=t,{modal:j,editBox:S}=i,{isReadBoxOpen:g,isEditBoxOpen:L}=p,{result:r}=k(Y),v=E(),[B,y]=o.useState("");o.useEffect(()=>{if(r){const b=d.map(N=>r[N]).join(" ");y(b)}},[r]);const x=()=>{v(c.currentAction({actionType:"delete",data:r})),j.open()},f=()=>{v(c.currentAction({actionType:"update",data:r})),S.open()},C=g||L?{opacity:1}:{opacity:0};return e.jsxs(e.Fragment,{children:[e.jsxs(O,{style:C,gutter:24,children:[e.jsx(m,{span:10,children:e.jsx("p",{style:{marginBottom:"10px"},children:B})}),e.jsxs(m,{span:14,children:[e.jsx(u,{onClick:x,type:"text",icon:e.jsx(W,{}),size:"small",style:{float:"right",marginLeft:"5px",marginTop:"10px"},children:s("remove")}),e.jsx(u,{onClick:f,type:"text",icon:e.jsx(P,{}),size:"small",style:{float:"right",marginLeft:"0px",marginTop:"10px"},children:s("edit")})]}),e.jsx(m,{span:24,children:e.jsx("div",{className:"line"})}),e.jsx("div",{className:"space10"})]}),e.jsx(X,{config:t}),e.jsx(G,{config:t,formElements:a,withUpload:n})]})}function me({config:t}){return e.jsxs(O,{gutter:8,children:[e.jsx(m,{className:"gutter-row",span:21,children:e.jsx(J,{config:t})}),e.jsx(m,{className:"gutter-row",span:3,children:e.jsx(u,{onClick:addNewItem,block:!0,icon:e.jsx(K,{})})})]})}function pe({config:t,createForm:a,updateForm:n,withUpload:s=!1}){const i=E();return o.useLayoutEffect(()=>{i(c.resetState())},[]),e.jsxs(q,{config:t,fixHeaderPanel:e.jsx(me,{config:t}),sidePanelBottomContent:e.jsx($,{config:t,formElements:a,withUpload:s}),sidePanelTopContent:e.jsx(de,{config:t,formElements:n,withUpload:s}),children:[e.jsx(oe,{config:t}),e.jsx(U,{config:t})]})}const I={name:{label:"client name",type:"string",required:!0},hourlyrate:{label:"client hourly rate",type:"number",required:!0},contactnr:{label:"contact nr",type:"string"},contactphone:{label:"contact phone",type:"phone"},contactgmail:{label:"contact email",type:"email"},companyaddress:{label:"company address",type:"address"},vatid:{label:"vat id",type:"string"},regnr:{label:"reg nr",type:"string"},created:{label:"created on",type:"date",required:!0,disableForForm:!0}};function je(){const t=h(),a="client",n={displayLabels:["name"],searchFields:["name","contactphone","contactgmail","companyaddress","vatid","regnr","contactnr"]},s=["name"],i={PANEL_TITLE:t("client"),DATATABLE_TITLE:t("client_list"),ADD_NEW_ENTITY:t("add_new_client"),ENTITY_NAME:t("client")},d={...{entity:a,...i},fields:I,searchConfig:n,deleteModalLabels:s};return e.jsx(pe,{createForm:e.jsx(F,{fields:I},"1"),updateForm:e.jsx(F,{fields:I},"2"),config:d})}export{je as default};
