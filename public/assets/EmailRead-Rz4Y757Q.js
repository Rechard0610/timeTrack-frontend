import{aw as E,av as N,ai as h,a as d,ah as e,ax as A,aF as I}from"./index-WozvSfaz.js";import{ax as y,B as m,aM as P,aK as v,aU as $,aQ as b}from"./IdurarOs-2Q7XqIs7.js";import{V as B,P as R,s as p}from"./ErpApp-AJk95zmD.js";import{c as S,s as w,E as x}from"./selectors-wTqr4dM2.js";import{e as f}from"./actions-iFxDMtyd.js";import{C as D}from"./CloseCircleOutlined--Y-SA1pW.js";const{Title:j,Paragraph:M}=$;function k({config:s,selectedItem:a}){const t=y(),{entity:r,ENTITY_NAME:o}=s,i=E(),{erpContextAction:_}=B(),l=N(),{result:c}=h(S),{readPanel:u,updatePanel:g}=_,T={emailName:"",emailKey:"",emailSubject:"",emailBody:"",emailVariables:[],_id:""},[n,C]=d.useState(a??T);return d.useEffect(()=>{const L=new AbortController;return c&&C(c),()=>L.abort()},[c]),e.jsxs(e.Fragment,{children:[e.jsx(R,{onBack:()=>{u.close(),l(`/${r.toLowerCase()}`)},title:`${o} # ${n==null?void 0:n.emailName}`,ghost:!1,extra:[e.jsx(m,{onClick:()=>{u.close(),l(`/${r.toLowerCase()}`)},icon:e.jsx(D,{}),children:t("Close")},`${p.generate()}`),e.jsx(m,{onClick:()=>{i(f.currentAction({actionType:"update",data:n})),g.open(),l(`/${r.toLowerCase()}/update/${n._id}`)},type:"primary",icon:e.jsx(P,{}),children:t("Edit")},`${p.generate()}`)],style:{padding:"20px 0px"}}),e.jsx(v,{dashed:!0}),e.jsxs("div",{children:[e.jsx(j,{level:3,children:t("Subject")}),e.jsx(M,{children:n.emailSubject}),e.jsx(j,{level:3,children:t("Body")}),e.jsx("div",{dangerouslySetInnerHTML:{__html:n.emailBody}})]})]})}function F({config:s}){const a=E(),{id:t}=A();d.useLayoutEffect(()=>{a(f.read({entity:s.entity,id:t}))},[t]);const{result:r,isSuccess:o,isLoading:i=!0}=h(w);return i?e.jsx(x,{children:e.jsx(I,{})}):e.jsx(x,{children:o?e.jsx(k,{config:s,selectedItem:r}):e.jsx(b,{entity:s.entity})})}function U(){const s="email",a=y(),t={PANEL_TITLE:a("email_template"),DATATABLE_TITLE:a("email_template_list"),ADD_NEW_ENTITY:a("add_new_email_template"),ENTITY_NAME:a("email_template")},r={entity:s,create:!1,...t};return e.jsx(F,{config:r})}export{U as default};
